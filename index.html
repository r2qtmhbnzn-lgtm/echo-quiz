<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ÏÉùÌÉú¬∑ÌôòÍ≤Ω ÌÄ¥Ï¶à Í≤åÏûÑ</title>
  <style>
    :root{
      --bg1: #0f1724;
      --bg2: #071022;
      --card: rgba(255,255,255,0.06);
      --accent: #7ee787; /* pale green */
      --accent-2: #6ec3ff; /* blue */
      --glass: rgba(255,255,255,0.04);
      --text: #e6f0ef;
      --muted: #9fb3b0;
      --success: #66d86b;
      --danger: #ff7b7b;
      --radius: 14px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    /* Page layout - full screen */
    html,body{
      height:100%;
      margin:0;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(112,197,190,0.06), transparent),
                  linear-gradient(180deg,var(--bg1), var(--bg2) 70%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .app {
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
      box-sizing:border-box;
    }

    .container {
      width:100%;
      max-width:1100px;
      height:calc(100vh - 64px);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:18px;
      box-shadow: 0 10px 40px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      display:grid;
      grid-template-columns: 360px 1fr;
      overflow:hidden;
    }

    /* left sidebar (info / progress) */
    .sidebar {
      padding:28px;
      background: linear-gradient(135deg, rgba(110,195,255,0.04), rgba(126,231,135,0.02));
      display:flex;
      flex-direction:column;
      gap:20px;
      border-right: 1px solid rgba(255,255,255,0.03);
    }

    .brand {
      display:flex;
      gap:14px;
      align-items:center;
    }
    .logo {
      width:56px;
      height:56px;
      border-radius:12px;
      background: linear-gradient(135deg,var(--accent),var(--accent-2));
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:#042028;
      box-shadow: 0 6px 18px rgba(14,57,46,0.2);
      font-size:20px;
    }
    .brand h1{
      margin:0;
      font-size:18px;
      letter-spacing: -0.2px;
    }
    .brand p{
      margin:0;
      font-size:12px;
      color:var(--muted);
    }

    .progress-wrap{
      margin-top:8px;
    }
    .progress-bar {
      background: rgba(255,255,255,0.03);
      height:12px;
      border-radius:999px;
      overflow:hidden;
    }
    .progress-fill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      border-radius:999px;
      transition: width 400ms cubic-bezier(.2,.9,.3,1);
      box-shadow: 0 6px 18px rgba(110,195,255,0.08);
    }
    .meta {
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-top:10px;
      color:var(--muted);
      font-size:13px;
    }

    .score-card{
      margin-top:auto;
      padding:16px;
      background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.02);
    }
    .score-card h3{margin:0 0 8px 0; font-size:14px;}
    .score{ font-size:28px; font-weight:700; color:var(--accent); margin:0; }
    .controls{ display:flex; gap:8px; margin-top:12px; }

    button.btn{
      border:0;
      padding:10px 14px;
      background:var(--glass);
      color:var(--text);
      border-radius:10px;
      cursor:pointer;
      font-size:14px;
      transition: transform 120ms ease, background 120ms;
    }
    button.btn:hover{ transform: translateY(-3px); background: rgba(255,255,255,0.06); }
    button.primary{
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#042028;
      font-weight:600;
      box-shadow: 0 10px 30px rgba(110,195,255,0.06);
    }

    /* main quiz area */
    .main {
      padding:42px;
      display:flex;
      flex-direction:column;
      gap:18px;
      align-items:stretch;
      position:relative;
      overflow:hidden;
    }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius: var(--radius);
      padding:28px;
      box-shadow: 0 6px 30px rgba(2,6,23,0.45);
      border:1px solid rgba(255,255,255,0.03);
      flex:1 1 auto;
      min-height:300px;
      display:flex;
      flex-direction:column;
      gap:18px;
      position:relative;
    }
    .q-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .q-id{
      font-size:13px;
      color:var(--muted);
    }
    .q-text{
      font-size:20px;
      font-weight:600;
      line-height:1.35;
      color:var(--text);
    }

    .options{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:8px;
    }
    .option{
      padding:14px;
      border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      border:1px solid rgba(255,255,255,0.025);
      cursor:pointer;
      transition:transform 120ms ease, box-shadow 120ms;
      display:flex;
      align-items:center;
      gap:12px;
      min-height:64px;
    }
    .option:hover{ transform:translateY(-4px); box-shadow: 0 8px 30px rgba(6,20,30,0.25); }
    .option .key{
      width:40px;
      height:40px;
      border-radius:10px;
      background: rgba(255,255,255,0.02);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:var(--accent-2);
      font-size:14px;
    }
    .option .txt{ font-size:15px; color:var(--text); }

    .option.correct{
      border-color: rgba(102,216,107,0.18);
      background: linear-gradient(90deg, rgba(102,216,107,0.08), rgba(110,195,255,0.02));
      box-shadow: 0 8px 26px rgba(102,216,107,0.06);
    }
    .option.wrong{
      border-color: rgba(255,123,123,0.12);
      background: linear-gradient(90deg, rgba(255,123,123,0.03), rgba(255,255,255,0.005));
      opacity:0.9;
    }
    .explain{
      margin-top:6px;
      font-size:13px;
      color:var(--muted);
      line-height:1.4;
    }

    .actions{
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:center;
      margin-top:8px;
    }

    .nav{
      display:flex;
      gap:10px;
      align-items:center;
    }

    .chip{
      padding:8px 10px;
      border-radius:10px;
      background: rgba(255,255,255,0.02);
      font-size:13px;
      color:var(--muted);
    }

    /* final result overlay */
    .overlay{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(180deg, rgba(2,10,12,0.7), rgba(2,10,12,0.85));
      z-index:30;
      padding:30px;
      box-sizing:border-box;
      opacity:0;
      pointer-events:none;
      transition:opacity 260ms ease;
    }
    .overlay.show{ opacity:1; pointer-events:auto; }

    .result-card{
      width:min(720px,96%);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:28px;
      border-radius:18px;
      text-align:center;
      border:1px solid rgba(255,255,255,0.03);
    }
    .big-score{
      font-size:56px;
      margin:8px 0;
      color:var(--accent);
      font-weight:800;
    }
    .result-msg{ color:var(--muted); margin-bottom:12px; }

    /* small screens */
    @media (max-width:900px){
      .container{ grid-template-columns: 1fr; height:auto; min-height:100vh; }
      .sidebar{ order:2; border-right: none; border-top:1px solid rgba(255,255,255,0.02); }
      .main{ order:1; padding:24px; }
      .options{ grid-template-columns:1fr; }
      .container{ border-radius:0; }
    }

    /* accessibility focus */
    .option:focus{ outline:3px solid rgba(110,195,255,0.12); outline-offset:3px; }
    button:focus{ outline:3px solid rgba(126,231,135,0.12); outline-offset:3px; }
  </style>
</head>
<body>
  <div class="app">
    <div class="container" role="application" aria-label="ÏÉùÌÉú ÌôòÍ≤Ω ÌÄ¥Ï¶à">
      <aside class="sidebar" aria-hidden="false">
        <div class="brand">
          <div class="logo" aria-hidden="true">Eüåø</div>
          <div>
            <h1>EcoQuiz</h1>
            <p>ÏÉùÌÉúÏôÄ ÌôòÍ≤ΩÏùÑ Î∞∞Ïö∞Îäî 10Î¨∏Ï†ú ÌÄ¥Ï¶à</p>
          </div>
        </div>

        <div class="progress-wrap" aria-hidden="false">
          <div class="progress-bar" aria-hidden="true">
            <div class="progress-fill" id="progressFill" style="width:0%"></div>
          </div>
          <div class="meta">
            <div id="qMeta" class="q-id">Î¨∏Ï†ú 1 / 10</div>
            <div id="percent" class="q-id">0%</div>
          </div>
        </div>

        <div class="score-card" aria-live="polite">
          <h3>ÌòÑÏû¨ Ï†êÏàò</h3>
          <div style="display:flex;align-items:center;justify-content:space-between;">
            <p class="score" id="score">0</p>
            <div style="text-align:right">
              <div class="chip" id="correctCount">Ï†ïÎãµ: 0</div>
              <div class="chip" id="wrongCount" style="margin-top:8px">Ïò§Îãµ: 0</div>
            </div>
          </div>

          <div class="controls">
            <button class="btn" id="btnPrev" title="Ïù¥Ï†Ñ Î¨∏Ï†ú (‚Üê)">Ïù¥Ï†Ñ</button>
            <button class="btn primary" id="btnNext" title="Îã§Ïùå Î¨∏Ï†ú (‚Üí)">Îã§Ïùå</button>
            <button class="btn" id="btnRestart" title="Ï≤òÏùåÎ∂ÄÌÑ∞">Ïû¨ÏãúÏûë</button>
          </div>
        </div>

        <div style="font-size:12px;color:var(--muted);margin-top:12px;">
          ÌåÅ: ÌÇ§Î≥¥Îìú ‚Üê ‚Üí Î°ú Ïù¥Îèô, Ïà´ÏûêÌÇ§(1-4)Î°ú ÏÑ†ÌÉùÌï† Ïàò ÏûàÏäµÎãàÎã§.
        </div>
      </aside>

      <main class="main" id="mainContent">
        <div class="card" role="main" aria-live="polite">
          <div class="q-header">
            <div class="q-id" id="qIndex">Î¨∏Ï†ú 1</div>
            <div class="chip" id="difficulty">ÎÇúÏù¥ÎèÑ: Î≥¥ÌÜµ</div>
          </div>

          <div class="q-text" id="qText">Î∂àÎü¨Ïò§Îäî Ï§ë...</div>

          <div class="options" id="options" role="list">
            <!-- options injected here -->
          </div>

          <div class="explain" id="explain" aria-live="polite" style="display:none"></div>

          <div class="actions">
            <div class="nav">
              <button class="btn" id="showAnswerBtn">Ï†ïÎãµ Î≥¥Í∏∞</button>
            </div>
            <div style="display:flex;gap:10px;align-items:center">
              <div style="font-size:13px;color:var(--muted)">ÏßÑÌñâ</div>
            </div>
          </div>

          <!-- result overlay -->
          <div class="overlay" id="overlay" aria-hidden="true">
            <div class="result-card" role="dialog" aria-modal="true" aria-labelledby="resultTitle">
              <h2 id="resultTitle">ÌÄ¥Ï¶à ÏôÑÎ£å!</h2>
              <div class="big-score" id="finalScore">0 / 10</div>
              <div class="result-msg" id="resultMsg">Í≤∞Í≥º Î©îÏãúÏßÄ</div>
              <div style="display:flex;gap:12px;justify-content:center;margin-top:16px;">
                <button class="btn primary" id="btnRetry">Îã§Ïãú ÌíÄÍ∏∞</button>
                <button class="btn" id="btnReview">Î¨∏Ï†ú Îã§Ïãú Î≥¥Í∏∞</button>
              </div>
            </div>
          </div>

        </div>
      </main>
    </div>
  </div>

  <script>
    /* Quiz data: 10 ecology/environment questions
       Each question: {q, options:[], answer: index, explain, difficulty}
    */
    const QUIZ = [
      {
        q: "Ïò®Ïã§Í∞ÄÏä§ Ï§ë Í∞ÄÏû• ÌÅ∞ ÎπÑÏ§ëÏùÑ Ï∞®ÏßÄÌïòÏó¨ ÏßÄÍµ¨ Ïò®ÎÇúÌôîÏùò Ï£ºÏöî ÏõêÏù∏ÏúºÎ°ú ÏïåÎ†§ÏßÑ Í∏∞Ï≤¥Îäî Î¨¥ÏóáÏù∏Í∞ÄÏöî?",
        options: ["ÏÇ∞ÏÜå (O‚ÇÇ)","Ïù¥ÏÇ∞ÌôîÌÉÑÏÜå (CO‚ÇÇ)","ÏßàÏÜå (N‚ÇÇ)","Ìó¨Î•® (He)"],
        answer: 1,
        explain: "Ïù¥ÏÇ∞ÌôîÌÉÑÏÜå(CO‚ÇÇ)Îäî ÏÇ∞ÏóÖ ÌôúÎèô, ÌôîÏÑùÏó∞Î£å Ïó∞ÏÜå, ÏÇºÎ¶º ÌååÍ¥¥ Îì±ÏúºÎ°ú ÎåÄÍ∏∞ Ï§ë ÎÜçÎèÑÍ∞Ä Ï¶ùÍ∞ÄÌïòÎ©∞ ÏßÄÍµ¨ Ïò®ÎÇúÌôîÏùò Ï£ºÏöî ÏõêÏù∏ÏûÖÎãàÎã§.",
        difficulty: "Ïâ¨ÏõÄ"
      },
      {
        q: "ÏÉùÌÉúÍ≥ÑÏóêÏÑú ‚ÄòÍ∏∞Ï¥àÏÉùÏÇ∞Ïûê(primary producer)‚ÄôÏóê Ìï¥ÎãπÌïòÎäî ÏÉùÎ¨ºÍµ∞ÏùÄ?",
        options: ["Ï¥àÏãùÎèôÎ¨º","Ìè¨ÏãùÏûê","Í¥ëÌï©ÏÑ±ÏùÑ ÌïòÎäî ÏãùÎ¨ºÍ≥º Ï°∞Î•ò","Î∂ÑÌï¥Ïûê"],
        answer: 2,
        explain: "Í∏∞Ï¥àÏÉùÏÇ∞ÏûêÎäî ÌÉúÏñëÍ¥ëÏùÑ Ïù¥Ïö©Ìï¥ Î¨¥Í∏∞Î¨ºÏùÑ Ïú†Í∏∞Î¨ºÎ°ú Ï†ÑÌôòÌïòÎäî Í¥ëÌï©ÏÑ±ÏÉùÎ¨º(ÏãùÎ¨º, Ï°∞Î•ò, ÏùºÎ∂Ä Î∞ïÌÖåÎ¶¨ÏïÑ)ÏûÖÎãàÎã§.",
        difficulty: "Î≥¥ÌÜµ"
      },
      {
        q: "Îã§Ïùå Ï§ë ÌîåÎùºÏä§Ìã±Ïù¥ ÏÉùÌÉúÍ≥ÑÏóê ÎØ∏ÏπòÎäî ÏòÅÌñ•ÏúºÎ°ú Ïò≥ÏßÄ ÏïäÏùÄ Í≤ÉÏùÄ?",
        options: ["Ìï¥ÏñëÏÉùÎ¨ºÏùò ÏÑ≠Ïãù Î∞è ÏßàÏãù Ïú†Î∞ú","ÎØ∏ÏÑ∏ÌîåÎùºÏä§Ìã±Ïù¥ Î®πÏù¥ÏÇ¨Ïä¨ÏùÑ ÌÜµÌï¥ Ï∂ïÏ†Å","ÌîåÎùºÏä§Ìã±ÏùÄ ÏûêÏó∞ÏóêÏÑú Îπ†Î•¥Í≤å ÏôÑÏ†Ñ Î∂ÑÌï¥ÎêúÎã§","Ìï¥Ïïà¬∑ÏÉùÎ¨º ÏÑúÏãùÏßÄ ÌõºÏÜê Ïú†Î∞ú"],
        answer: 2,
        explain: "Ï†ïÎãµÏùÄ 'ÌîåÎùºÏä§Ìã±ÏùÄ ÏûêÏó∞ÏóêÏÑú Îπ†Î•¥Í≤å ÏôÑÏ†Ñ Î∂ÑÌï¥ÎêúÎã§'Í∞Ä Ïò≥ÏßÄ ÏïäÏùÄ Î¨∏Ïû•ÏûÖÎãàÎã§. ÎåÄÎ∂ÄÎ∂ÑÏùò ÌîåÎùºÏä§Ìã±ÏùÄ Î∂ÑÌï¥Í∞Ä Îß§Ïö∞ ÎäêÎ¶ΩÎãàÎã§.",
        difficulty: "Ïâ¨ÏõÄ"
      },
      {
        q: "ÏßÄÏÜç Í∞ÄÎä•Ìïú ÏÇ∞Î¶º Í¥ÄÎ¶¨(Sustainable forestry)Ïùò ÌïµÏã¨ Î™©ÌëúÍ∞Ä ÏïÑÎãå Í≤ÉÏùÄ?",
        options: ["ÏÉùÎ¨ºÎã§ÏñëÏÑ± Î≥¥Ï†Ñ","ÏßÄÏó≠Ï£ºÎØºÏùò ÏÉùÍ≥Ñ Î≥¥Ïû•","Î™©Ïû¨Î•º Î¨¥Ï†úÌïúÏúºÎ°ú Îπ†Î•¥Í≤å Ï±ÑÏ∑®","ÌÜ†ÏßÄ Î∞è ÏàòÏûêÏõê Î≥¥Ï†Ñ"],
        answer: 2,
        explain: "ÏßÄÏÜç Í∞ÄÎä•Ìïú ÏÇ∞Î¶º Í¥ÄÎ¶¨Îäî ÏûêÏõêÏùÑ ÎØ∏Îûò ÏÑ∏ÎåÄÍπåÏßÄ Ïú†ÏßÄÌïòÎäî Í≤ÉÏù¥ Î™©Ï†ÅÏù¥ÎØÄÎ°ú 'Î¨¥Ï†úÌïú Îπ†Î•∏ Ï±ÑÏ∑®'Îäî Î™©ÌëúÍ∞Ä ÏïÑÎãôÎãàÎã§.",
        difficulty: "Î≥¥ÌÜµ"
      },
      {
        q: "ÏÇ¨ÎßâÌôî(desertification)Î•º Í∞ÄÏÜçÌôîÏãúÌÇ§Îäî Ï£ºÎêú Ïù∏Í∞Ñ ÌôúÎèôÏùÄ Î¨¥ÏóáÏù∏Í∞ÄÏöî?",
        options: ["Í≥ºÎèÑÌïú Î∞©Î™©Í≥º ÏÇºÎ¶º Î≤åÏ±Ñ","ÏßÄÍµ¨ ÏûêÍ∏∞Ïû• Î≥ÄÌôî","ÎåÄÍ∏∞ Ï§ë ÏÇ∞ÏÜå Ï¶ùÍ∞Ä","Ìï¥Ïñë ÏÇ∞ÏÑ±Ìôî"],
        answer: 0,
        explain: "Í≥ºÎèÑÌïú Î∞©Î™©, ÏÇºÎ¶º Î≤åÏ±Ñ, ÎπÑÌö®Ïú®Ï†Å ÎÜçÏóÖ Îì±Ïù¥ ÌÜ†Ïñë ÏïÖÌôîÏôÄ ÏãùÏÉù ÏÜêÏã§ÏùÑ ÏùºÏúºÏºú ÏÇ¨ÎßâÌôîÎ•º Í∞ÄÏÜçÌôîÌï©ÎãàÎã§.",
        difficulty: "Î≥¥ÌÜµ"
      },
      {
        q: "Îã§Ïùå Ï§ë 'ÏÉùÎ¨ºÎã§ÏñëÏÑ±(biodiversity)'Ïóê Ìè¨Ìï®ÎêòÏßÄ ÏïäÎäî Ìï≠Î™©ÏùÄ?",
        options: ["Ïú†Ï†ÑÏûê Îã§ÏñëÏÑ±","Ï¢Ö Îã§ÏñëÏÑ±","ÏÉùÌÉúÍ≥Ñ Îã§ÏñëÏÑ±","ÎåÄÍ∏∞ Ïù¥Ïò®ÌôîÎèÑ"],
        answer: 3,
        explain: "Ïú†Ï†ÑÏûê, Ï¢Ö, ÏÉùÌÉúÍ≥Ñ Îã§ÏñëÏÑ±ÏùÄ ÏÉùÎ¨ºÎã§ÏñëÏÑ±Ïùò Íµ¨ÏÑ± ÏöîÏÜåÏù¥Î©∞ 'ÎåÄÍ∏∞ Ïù¥Ïò®ÌôîÎèÑ'Îäî Ìè¨Ìï®ÎêòÏßÄ ÏïäÏäµÎãàÎã§.",
        difficulty: "Ïâ¨ÏõÄ"
      },
      {
        q: "ÌÉÑÏÜåÏ§ëÎ¶Ω(carbon neutrality)Ïùò ÏùòÎØ∏Î°ú Í∞ÄÏû• Ï†ÅÏ†àÌïú Í≤ÉÏùÄ?",
        options: ["ÌÉÑÏÜå Î∞∞Ï∂úÏùÑ Î¨¥Ï°∞Í±¥ Ï§ëÎã®ÌïòÎäî Í≤É","Î∞∞Ï∂úÌïú ÌÉÑÏÜåÎßåÌÅº Ìù°ÏàòÌïòÍ±∞ÎÇò ÏÉÅÏáÑÌï¥ Ïàú Î∞∞Ï∂úÏùÑ 0ÏúºÎ°ú ÎßåÎìúÎäî Í≤É","ÌÉÑÏÜå Î∞∞Ï∂úÏùÑ Ï¶ùÍ∞ÄÏãúÌÇ§Îäî Í≤É","ÌÉÑÏÜåÎ•º Í∏àÏßÄÌïòÎäî Ï†ïÏ±Ö"],
        answer: 1,
        explain: "ÌÉÑÏÜåÏ§ëÎ¶ΩÏùÄ Î∞∞Ï∂úÌïú ÌÉÑÏÜåÎ•º Ìù°ÏàòÌïòÍ±∞ÎÇò ÏÉÅÏáÑÌïòÏó¨ Ïàú Î∞∞Ï∂ú(net emissions)ÏùÑ 0ÏúºÎ°ú ÎßåÎìúÎäî Í≤ÉÏùÑ ÏùòÎØ∏Ìï©ÎãàÎã§.",
        difficulty: "Î≥¥ÌÜµ"
      },
      {
        q: "Îã§Ïùå Ï§ë ÏÉùÌÉúÍ≥Ñ ÏÑúÎπÑÏä§(ecosystem services)Ïóê Ìï¥ÎãπÌïòÎäî ÏòàÏãúÎäî?",
        options: ["Î≤åÏóê ÏùòÌïú ÏûëÎ¨º ÏàòÎ∂Ñ","Ïù∏ÌÑ∞ÎÑ∑ ÏÜçÎèÑ Ìñ•ÏÉÅ","ÌôîÌïôÎπÑÎ£å Í∞ÄÍ≤© ÌïòÎùΩ","ÌïµÏúµÌï© Î∞úÏ†Ñ"],
        answer: 0,
        explain: "Î≤åÏùò ÏàòÎ∂Ñ ÌôúÎèôÏùÄ ÏÉùÌÉúÍ≥ÑÍ∞Ä Ïù∏Í∞ÑÏóêÍ≤å Ï†úÍ≥µÌïòÎäî ÏàòÎ∂Ñ ÏÑúÎπÑÏä§Î°ú, ÏÉùÌÉúÍ≥Ñ ÏÑúÎπÑÏä§Ïùò Ï†ÑÌòïÏ†ÅÏù∏ ÏòàÏûÖÎãàÎã§.",
        difficulty: "Ïâ¨ÏõÄ"
      },
      {
        q: "Ìï¥Ïñë ÏÇ∞ÏÑ±Ìôî(ocean acidification)Ïùò ÏßÅÏ†ëÏ†ÅÏù∏ ÏõêÏù∏ÏùÄ Î¨¥ÏóáÏù∏Í∞ÄÏöî?",
        options: ["Ìï¥Ïàò Ïò®ÎèÑ Ï†ÄÌïò","Ìï¥ÏñëÏúºÎ°ú Ìù°ÏàòÎêú Ïù¥ÏÇ∞ÌôîÌÉÑÏÜå Ï¶ùÍ∞Ä","Î∞îÎã§Ïùò ÏóºÎ∂Ñ Í∞êÏÜå","ÌîåÎûëÌÅ¨ÌÜ§ Í∞úÏ≤¥Ïàò Ï¶ùÍ∞Ä"],
        answer: 1,
        explain: "ÎåÄÍ∏∞ Ï§ë CO‚ÇÇÍ∞Ä Ìï¥ÏàòÏóê Ìù°ÏàòÎêòÎ©¥ ÌÉÑÏÇ∞Ïù¥ ÌòïÏÑ±ÎêòÏñ¥ Ìï¥ÏàòÏùò pHÎ•º ÎÇÆÏ∂îÎ©∞ Ìï¥Ïñë ÏÇ∞ÏÑ±ÌôîÎ•º ÏùºÏúºÌÇµÎãàÎã§.",
        difficulty: "Î≥¥ÌÜµ"
      },
      {
        q: "ÎèÑÏãú ÏÉùÌÉúÍ≥ÑÏóêÏÑú 'ÎÖπÏßÄ(urban green space)'Í∞Ä Ï†úÍ≥µÌïòÎäî Ïù¥Ï†êÏúºÎ°ú Í∞ÄÏû• Í±∞Î¶¨Í∞Ä Î®º Í≤ÉÏùÄ?",
        options: ["Ïó¥ÏÑ¨Ìö®Í≥º ÏôÑÌôî","ÎåÄÍ∏∞Ïßà Í∞úÏÑ†","Ï†ïÏÑúÏ†Å¬∑ÏÇ¨ÌöåÏ†Å ÌòúÌÉù Ï†úÍ≥µ","ÌÜ†ÏßÄ Í∞úÎ∞úÏùÑ ÏúÑÌïú Î¨¥Ï°∞Í±¥Ï†Å ÌèêÍ∏∞"],
        answer: 3,
        explain: "ÎÖπÏßÄÎäî Ïó¥ÏÑ¨ ÏôÑÌôî, Í≥µÍ∏∞ Ï†ïÌôî, Ìú¥ÏãùÍ≥µÍ∞Ñ Ï†úÍ≥µ Îì± Ïó¨Îü¨ Ïù¥Ï†êÏùÑ Ï†úÍ≥µÌïòÏßÄÎßå 'ÌÜ†ÏßÄ Í∞úÎ∞úÏùÑ ÏúÑÌïú ÌèêÍ∏∞'Îäî Ìï¥ÎãπÎêòÏßÄ ÏïäÏäµÎãàÎã§.",
        difficulty: "Ïâ¨ÏõÄ"
      }
    ];

    // state
    let state = {
      cur: 0,
      answers: Array(QUIZ.length).fill(null), // stores selected index or null
      score: 0,
      correct: 0,
      wrong: 0,
      finished: false
    };

    // elements
    const qIndexEl = document.getElementById('qIndex');
    const qTextEl = document.getElementById('qText');
    const optionsEl = document.getElementById('options');
    const explainEl = document.getElementById('explain');
    const progressFill = document.getElementById('progressFill');
    const qMeta = document.getElementById('qMeta');
    const percentEl = document.getElementById('percent');
    const scoreEl = document.getElementById('score');
    const correctCountEl = document.getElementById('correctCount');
    const wrongCountEl = document.getElementById('wrongCount');
    const difficultyEl = document.getElementById('difficulty');
    const btnPrev = document.getElementById('btnPrev');
    const btnNext = document.getElementById('btnNext');
    const btnRestart = document.getElementById('btnRestart');
    const showAnswerBtn = document.getElementById('showAnswerBtn');
    const overlay = document.getElementById('overlay');
    const finalScore = document.getElementById('finalScore');
    const resultMsg = document.getElementById('resultMsg');
    const btnRetry = document.getElementById('btnRetry');
    const btnReview = document.getElementById('btnReview');

    // initialize
    function init(){
      renderQuestion();
      updateSidebar();
      bindEvents();
    }

    function renderQuestion(){
      const q = QUIZ[state.cur];
      qIndexEl.textContent = `Î¨∏Ï†ú ${state.cur + 1}`;
      qTextEl.textContent = q.q;
      difficultyEl.textContent = `ÎÇúÏù¥ÎèÑ: ${q.difficulty}`;
      // create options
      optionsEl.innerHTML = '';
      q.options.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className = 'option';
        btn.setAttribute('role','button');
        btn.setAttribute('tabindex','0');
        btn.dataset.index = i;
        btn.innerHTML = `
          <div class="key">${String.fromCharCode(65 + i)}</div>
          <div class="txt">${opt}</div>
        `;
        btn.addEventListener('click', ()=> choose(i));
        btn.addEventListener('keyup', (e)=> { if(e.key === 'Enter') choose(i); });
        optionsEl.appendChild(btn);
      });

      // show previous selection if exists
      const sel = state.answers[state.cur];
      if(sel !== null){
        markSelection(sel, false);
        showExplanation();
      } else {
        clearExplanation();
      }

      // update meta
      qMeta.textContent = `Î¨∏Ï†ú ${state.cur + 1} / ${QUIZ.length}`;
      const pct = Math.round((state.cur / (QUIZ.length)) * 100);
      percentEl.textContent = `${pct}%`;
      progressFill.style.width = `${(state.cur / QUIZ.length) * 100}%`;

      // disable prev/next where appropriate
      btnPrev.disabled = state.cur === 0;
      btnNext.disabled = state.cur === QUIZ.length - 1;
    }

    function choose(index){
      if(state.finished) return;
      // if already answered this question, ignore repeat clicks
      if(state.answers[state.cur] !== null) return;
      state.answers[state.cur] = index;

      const correctIndex = QUIZ[state.cur].answer;
      const isCorrect = index === correctIndex;
      if(isCorrect){
        state.score += 10; // each correct 10 points
        state.correct++;
      } else {
        state.wrong++;
      }

      // mark UI
      markSelection(index, true);

      // show explanation
      showExplanation();

      // update sidebar
      updateSidebar();

      // if last question answered -> finish
      if(state.answers.every(a => a !== null)){
        finishQuiz();
      }
    }

    function markSelection(index, reveal){
      const optionNodes = Array.from(optionsEl.children);
      optionNodes.forEach((node) => {
        node.classList.remove('correct','wrong');
      });
      const correctIndex = QUIZ[state.cur].answer;
      // highlight selected
      const selectedNode = optionNodes[index];
      if(reveal){
        if(index === correctIndex){
          selectedNode.classList.add('correct');
        } else {
          selectedNode.classList.add('wrong');
          optionNodes[correctIndex].classList.add('correct');
        }
      } else {
        // when revisiting show the previous result but don't change counts
        if(state.answers[state.cur] !== null){
          const prev = state.answers[state.cur];
          if(prev === correctIndex){
            optionNodes[prev].classList.add('correct');
          } else {
            optionNodes[prev].classList.add('wrong');
            optionNodes[correctIndex].classList.add('correct');
          }
        }
      }
    }

    function showExplanation(){
      const q = QUIZ[state.cur];
      explainEl.style.display = 'block';
      explainEl.textContent = q.explain;
    }
    function clearExplanation(){
      explainEl.style.display = 'none';
      explainEl.textContent = '';
    }

    function updateSidebar(){
      scoreEl.textContent = state.score;
      correctCountEl.textContent = `Ï†ïÎãµ: ${state.correct}`;
      wrongCountEl.textContent = `Ïò§Îãµ: ${state.wrong}`;
      const pct = Math.round((state.cur / QUIZ.length) * 100);
      qMeta.textContent = `Î¨∏Ï†ú ${state.cur + 1} / ${QUIZ.length}`;
      percentEl.textContent = `${pct}%`;
      progressFill.style.width = `${(state.cur / QUIZ.length) * 100}%`;
    }

    function next(){
      if(state.cur < QUIZ.length - 1){
        state.cur++;
        renderQuestion();
      } else {
        // last -> show finish if finished or prompt user
        if(state.answers.every(a => a !== null)){
          finishQuiz();
        } else {
          // jump to first unanswered if any
          const idx = state.answers.findIndex(a => a === null);
          if(idx !== -1) {
            state.cur = idx;
            renderQuestion();
          }
        }
      }
    }

    function prev(){
      if(state.cur > 0){
        state.cur--;
        renderQuestion();
      }
    }

    function finishQuiz(){
      state.finished = true;
      // calculate final metrics
      finalScore.textContent = `${state.score} / ${QUIZ.length * 10}`;
      // simple message
      const ratio = state.score / (QUIZ.length * 10);
      let msg = '';
      if(ratio === 1) msg = "ÏôÑÎ≤ΩÌï¥Ïöî! ÏÉùÌÉú¬∑ÌôòÍ≤Ω ÏßÄÏãùÏù¥ ÏïÑÏ£º Îõ∞Ïñ¥ÎÇ©ÎãàÎã§.";
      else if(ratio >= 0.8) msg = "ÏûòÌïòÏÖ®Ïñ¥Ïöî! ÌôòÍ≤ΩÏóê ÎåÄÌïú Ïù¥Ìï¥ÎèÑÍ∞Ä ÎÜíÏäµÎãàÎã§.";
      else if(ratio >= 0.5) msg = "Ï¢ãÏïÑÏöî! Î™á Í∞ÄÏßÄ ÎÇ¥Ïö©ÏùÑ Îã§Ïãú Î≥¥Î©¥ Îçî Ï¢ãÏïÑÏöî.";
      else msg = "Í¥úÏ∞ÆÏïÑÏöî ‚Äî Î∞∞ÏõÄÏùò ÏãúÏûëÏûÖÎãàÎã§. Ìï¥ÏÑ§ÏùÑ Î≥¥Í≥† Î≥µÏäµÌï¥Î≥ºÍπåÏöî?";
      resultMsg.textContent = msg;
      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
    }

    function restart(){
      state.cur = 0;
      state.answers = Array(QUIZ.length).fill(null);
      state.score = 0;
      state.correct = 0;
      state.wrong = 0;
      state.finished = false;
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
      renderQuestion();
      updateSidebar();
    }

    function review(){
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
      // go to first question
      state.cur = 0;
      renderQuestion();
    }

    // show answer button forced reveal for current question (if unanswered)
    showAnswerBtn.addEventListener('click', ()=>{
      if(state.answers[state.cur] === null){
        // mark as answered wrong and reveal correct (but don't change counts)
        // To avoid cheating by changing counts, we mark answer but not increase score.
        const correctIndex = QUIZ[state.cur].answer;
        markSelection(correctIndex, true);
        explainEl.style.display = 'block';
        explainEl.textContent = QUIZ[state.cur].explain;
        // set a sentinel so it won't count as answered for finish-check
        // we set answers[cur] = 'seen' to indicate user viewed answer; but to keep types consistent use -1
        state.answers[state.cur] = -1;
      }
    });

    btnPrev.addEventListener('click', prev);
    btnNext.addEventListener('click', next);
    btnRestart.addEventListener('click', ()=> {
      if(confirm('ÌÄ¥Ï¶àÎ•º Ï≤òÏùåÎ∂ÄÌÑ∞ Îã§Ïãú ÏãúÏûëÌï†ÍπåÏöî? ÌòÑÏû¨ ÏßÑÌñâ ÎÇ¥Ïö©ÏùÄ ÏÇ¨ÎùºÏßëÎãàÎã§.')) restart();
    });

    btnRetry.addEventListener('click', restart);
    btnReview.addEventListener('click', review);

    // keyboard support
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowRight') next();
      if(e.key === 'ArrowLeft') prev();
      if(['1','2','3','4'].includes(e.key)){
        const idx = Number(e.key) - 1;
        // ensure option exists
        if(optionsEl.children[idx]) optionsEl.children[idx].click();
      }
      if(e.key === 'Escape' && state.finished){
        overlay.classList.remove('show');
        overlay.setAttribute('aria-hidden','true');
      }
    });

    // allow clicking numbered nav on progress (future enhancement - but keep accessible)
    // initial render
    init();

    // small enhancement: announce when all answered and not yet finished
    setInterval(()=>{
      if(!state.finished && state.answers.every(a => a !== null)){
        finishQuiz();
      }
    },1500);

  </script>
</body>
</html>
